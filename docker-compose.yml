version: '3.3'

services:
  # TODO Development Reloader description
  website:
    build: ./website/
    image: alfred_site
    volumes:
      - "./website/:/app/"
  # TODO API description
  api:
    build: ./api/
    image: alfred_api
    depends_on:
      - website
      - db
    volumes:
      - "./api/:/app/"
      - "./website/dist/:/app/dist/"
      - "./videos/:/app/videos/"
    networks:
      - alfred_isolated
  db:
    image: mongo:4.2
    volumes:
      - './database:/data/db'
    networks:
      - alfred_isolated
networks:
  alfred_isolated:
